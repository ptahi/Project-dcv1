<?xml version="1.0" encoding="UTF-8"?>
<odoo>

  <!-- ========================================================= -->
  <!-- FORM TRA C·ª®U ƒê∆†N H√ÄNG -->
  <!-- URL: /track-order -->
  <!-- ========================================================= -->
  <template id="track_order_form" name="Track Order Form">
    <t t-call="om_sales.website_layout">
<!--      <a class="navbar-brand fw-bold fs-3 text-primary" href="/shop">-->
<!--                                <i class="fa fa-laptop me-2"></i>ThaisStore-->
<!--                            </a>-->
      <div class="container mt-5 mb-5" style="max-width: 600px;">
        <h2 class="text-center mb-4">Theo d√µi ƒë∆°n h√†ng</h2>

        <form action="/track-order/result" method="post" class="border p-4 rounded">

          <!-- üî¥ CSRF TOKEN (B·∫ÆT BU·ªòC) -->
          <input type="hidden"
                 name="csrf_token"
                 t-att-value="request.csrf_token()"/>

          <div class="form-group mb-3">
            <label for="order_code">M√£ ƒë∆°n h√†ng</label>
            <input type="text"
                   id="order_code"
                   name="order_code"
                   class="form-control"
                   placeholder="V√≠ d·ª•: GH0001"
                   required="required"/>
          </div>

          <div class="form-group mb-3">
            <label for="phone">S·ªë ƒëi·ªán tho·∫°i</label>
            <input type="text"
                   id="phone"
                   name="phone"
                   class="form-control"
                   placeholder="S·ªë ƒëi·ªán tho·∫°i ƒë·∫∑t h√†ng"
                   required="required"/>
          </div>

          <div class="d-flex justify-content-center gap-4 mt-4">
    <button type="submit" class="btn btn-primary px-4">
        Tra c·ª©u ƒë∆°n h√†ng
    </button>

    <a href="/shop" class="btn btn-outline-secondary px-4">
        <i class="fa fa-arrow-left"></i> Quay l·∫°i trang ch√≠nh
    </a>
</div>

        </form>
      </div>
    </t>
  </template>

  <!-- ========================================================= -->
  <!-- K·∫æT QU·∫¢ TRA C·ª®U ƒê∆†N H√ÄNG -->
  <!-- URL: /track-order/result -->
  <!-- ========================================================= -->
  <template id="track_order_result" name="Track Order Result">
    <t t-call="om_sales.website_layout">
      <div class="container mt-5 mb-5" style="max-width: 700px;">
        <h2 class="text-center mb-4">K·∫øt qu·∫£ tra c·ª©u ƒë∆°n h√†ng</h2>

        <!-- ======= T√åM TH·∫§Y ƒê∆†N H√ÄNG ======= -->
        <t t-if="order">
          <div class="card">
            <div class="card-body">
              <p><b>M√£ ƒë∆°n h√†ng:</b> <t t-esc="order.name"/></p>
              <p><b>Kh√°ch h√†ng:</b> <t t-esc="order.customer_name"/></p>
              <p><b>S·ªë ƒëi·ªán tho·∫°i:</b> <t t-esc="order.customer_phone"/></p>
              <p><b>Ng√†y ƒë·∫∑t:</b><span t-field="order.date_order" t-options="{'format': 'dd/MM/yyyy'}"/></p>
              <p><b>T·ªïng ti·ªÅn:</b> <t t-esc="order.total_price"/> VNƒê</p>

              <hr/>

              <p><b>Tr·∫°ng th√°i ƒë∆°n h√†ng:</b></p>
              <t t-if="order.state == 'awaiting_confirmation'">
                <span class="badge bg-warning fs-6">Ch·ªù x√°c nh·∫≠n</span>
              </t>

              <t t-if="order.state == 'confirmed'">
                <span class="badge bg-warning fs-6">ƒê√£ x√°c nh·∫≠n</span>
              </t>

              <t t-if="order.state == 'shipping'">
                <span class="badge bg-info fs-6">ƒêang giao h√†ng</span>
              </t>

              <t t-if="order.state == 'done'">
                <span class="badge bg-success fs-6">Ho√†n th√†nh</span>
              </t>

              <t t-if="order.state == 'draft'">
                <span class="badge bg-secondary fs-6">ƒêang x·ª≠ l√Ω</span>
              </t>

              <t t-if="order.state == 'cancel'">
                <span class="badge bg-danger fs-6">ƒê√£ h·ªßy</span>
              </t>

              <hr/>

              <p><b>Danh s√°ch s·∫£n ph·∫©m:</b></p>
              <ul>
                <t t-foreach="order.cart_line_ids" t-as="line">
                  <li>
                    <t t-esc="line.product_id.name"/> ‚Äì
                    S·ªë l∆∞·ª£ng: <t t-esc="line.quantity"/> ‚Äì
                    Gi√° b√°n: <t t-esc="line.price_subtotal"/> VNƒê
                  </li>
                </t>
              </ul>
            </div>
          </div>
        </t>

        <!-- ======= KH√îNG T√åM TH·∫§Y ƒê∆†N ======= -->
        <t t-else="">
          <div class="alert alert-danger text-center">
            Kh√¥ng t√¨m th·∫•y ƒë∆°n h√†ng.<br/>
            Vui l√≤ng ki·ªÉm tra l·∫°i <b>m√£ ƒë∆°n h√†ng</b> v√† <b>s·ªë ƒëi·ªán tho·∫°i</b>.
          </div>
        </t>

        <div class="text-center mt-4">
          <a href="/track-order" class="btn btn-secondary">
            Tra c·ª©u ƒë∆°n kh√°c
          </a>
        </div>
            <div class="mt-3 text-center">
    <a href="/shop" class="btn btn-outline-secondary">
        <i class="fa fa-arrow-left"></i> Ti·∫øp t·ª•c mua h√†ng
    </a>
</div>
      </div>
    </t>
  </template>

</odoo>
